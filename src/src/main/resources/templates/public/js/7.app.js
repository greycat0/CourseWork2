(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{144:function(e,a,t){var s=t(396);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,t(17).default)("283c57fe",s,!1,{})},395:function(e,a,t){"use strict";var s=t(144);t.n(s).a},396:function(e,a,t){(e.exports=t(16)(!1)).push([e.i,"\n.register[data-v-7bf3755a] {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n}\n.form[data-v-7bf3755a] {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    background-color: rgba(255, 255, 255, 0.75);\n    padding: 20px;\n    border-radius: 5px;\n}\n.field[data-v-7bf3755a] {\n    margin: 5px;\n}\n.ant-input-affix-wrapper[data-v-7bf3755a] {\n    width: 300px;\n    height: 32px;\n}\n.ok[data-v-7bf3755a] {\n    margin-top: 10px;\n}\n",""])},403:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"register"},[t("a-form",{staticClass:"form",attrs:{method:"POST",action:"/signup",form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{staticClass:"field"},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["login",{rules:[{required:!0,message:"Заполните это поле!"}]}],expression:"['login', { rules: [{ required: true, message: 'Заполните это поле!' }] }]"}],attrs:{placeholder:"Логин"}},[t("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),e._v(" "),t("a-form-item",{staticClass:"field"},[t("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"Заполните это поле!"},{validator:e.validateToNextPassword}]}],expression:"['password', { rules: [\n        { required: true, message: 'Заполните это поле!' },\n        { validator: validateToNextPassword}\n        ] }]"}],attrs:{placeholder:"Пароль"}},[t("a-icon",{attrs:{slot:"prefix",type:"key"},slot:"prefix"})],1)],1),e._v(" "),t("a-form-item",{staticClass:"field"},[t("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirm",{rules:[{required:!0,message:"Заполните это поле!"},{validator:e.compareToFirstPassword,message:"Пароли не совпадают!"}],validateFirst:!0}],expression:"['confirm', { rules: [\n        { required: true, message: 'Заполните это поле!' },\n        { validator: compareToFirstPassword, message: 'Пароли не совпадают!'}\n        ], validateFirst: true}]"}],attrs:{placeholder:"Подтвердите пароль"}},[t("a-icon",{attrs:{slot:"prefix",type:"check"},slot:"prefix"})],1)],1),e._v(" "),t("a-form-item",{staticClass:"ok"},[t("a-button",{attrs:{"html-type":"submit",type:"primary"}},[e._v("Зарегистрироваться")])],1)],1)],1)};s._withStripped=!0;var r=t(1),i=t(194),o=t(401),n=t(399),l=t(63),d=t(397);t(83),t(135),t(329),t(138),t(102);r.a.use(i.a),r.a.use(o.a),r.a.use(n.a),r.a.use(l.a);var c={name:"Register",data(){return{form:this.$form.createForm(this,{name:"register"}),show:!1}},async beforeMount(){d.a.config({maxCount:1}),await this.$store.dispatch("checkLogin"),this.$store.state.isLogin?this.$router.replace({path:"/"}):this.show=!0},methods:{handleSubmit(e){this.form.validateFields(async(a,t)=>{if(e.preventDefault(),!a){console.log("Received values of form: ",t);let e=await this.$store.dispatch("register",{login:this.form.getFieldValue("login"),password:this.form.getFieldValue("password")});console.log(e),1===e.status?this.$router.replace({path:"/"}):-2===e.status&&d.a.error("Введенный логин занят. Попробуйте другой")}})},compareToFirstPassword(e,a,t){this.form.getFieldValue("password")===a?t():t("passwords is not matching")},validateToNextPassword(e,a,t){this.form.getFieldValue("confirm")&&this.form.validateFields(["confirm"],{force:!0}),t()}}},u=(t(395),t(7)),p=Object(u.a)(c,s,[],!1,null,"7bf3755a",null);p.options.__file="src/components/Register.vue";a.default=p.exports}}]);